console.log("connected 1_global.js");const currentTheme=localStorage.getItem("theme")?localStorage.getItem("theme"):null,toggleSwitch=document.querySelector(".theme-checkbox");function switchTheme(e){e.target.checked?(document.documentElement.setAttribute("data-theme","dark"),localStorage.setItem("theme","dark")):(document.documentElement.setAttribute("data-theme","light"),localStorage.setItem("theme","light"))}function goBack(){window.history.back()}currentTheme&&(document.documentElement.setAttribute("data-theme",currentTheme),"dark"===currentTheme&&(toggleSwitch.checked=!0)),toggleSwitch.addEventListener("change",switchTheme,!1),document.querySelectorAll(".dropdown-menu").forEach((e=>{e.addEventListener("click",(e=>{e.stopPropagation()}))})),console.log("connected 2.0_navbar.js");const searchContainerMain=document.querySelector("#search-container-main"),searchForm=document.querySelector(".search-form"),searchInput=document.querySelector(".search-input"),authBtn=document.querySelector("#auth-btn"),authModal=new bootstrap.Modal(document.getElementById("auth-modal")),registerTab=new bootstrap.Tab(document.querySelector('#authTab a[href="#register-tab-page"]')),loginTab=new bootstrap.Tab(document.querySelector('#authTab a[href="#login-tab-page"]')),regbutton=document.querySelector("#btn-register"),loginbutton=document.querySelector("#btn-login"),reglink=document.querySelector("#register-link"),loginlink=document.querySelector("#login-link"),hideBtns=document.querySelectorAll(".toggle-hide");function toggleShow(e){"password"===e.previousElementSibling.type?(e.previousElementSibling.type="text",e.className="toggle-hide toggle-hide-hide",e.innerText="HIDE"):(e.previousElementSibling.type="password",e.className="toggle-hide toggle-hide-show",e.innerText="SHOW")}authBtn&&authBtn.addEventListener("click",(()=>{authModal.show(),loginTab.show()})),reglink.addEventListener("click",(function(e){e.preventDefault(),registerTab.show()})),loginlink.addEventListener("click",(function(e){e.preventDefault(),loginTab.show()})),hideBtns.forEach((e=>{e.addEventListener("click",(()=>{toggleShow(e)}))}));const themeCheckbox=document.querySelector(".theme-checkbox");themeCheckbox.addEventListener("change",(()=>{document.body.classList.toggle("light")})),console.log("connected 2.1_regvalidate.js");const regform=document.querySelector("#reg-form"),regemail=document.querySelector("#reg-email"),regpassword=document.querySelector("#reg-password"),regcaptcha=document.querySelector("#reg-form .g-recaptcha"),emailsmall=document.querySelector("#reg-form .email-small"),emailerr=document.querySelector("#reg-form .email-error"),captchasmall=document.querySelector("#reg-form .captcha-small"),loginForm=document.querySelector("#login-form"),loginemail=document.querySelector("#login-email"),loginCaptcha=document.querySelector("#login-form .g-recaptcha"),loginBtn=document.querySelector("#btn-login"),loginEmailsmall=document.querySelector("#login-form .email-small"),loginCaptchasmall=document.querySelector("#login-form .captcha-small");let registrationErrors={emailbackend:!0,email:!0,password:!0,recaptcha:!0},loginErrors={email:!0};function setErrorFor(e,a){const n=e.parentElement;n.querySelector(".small").innerText=a,n.className="form-group error"}function setSuccessFor(e){e.parentElement.className="form-group success"}function isEmail(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function checkEmail(){let e=document.querySelector("#reg-email").value.toLowerCase();fetch("/usercheck",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}).then((e=>e.json())).then((e=>{if(console.log(e),"success"!=e.message){emailsmall.innerHTML=""+e.message;emailsmall.parentElement.className="form-group error",registrationErrors.emailbackend=!0}else registrationErrors.emailbackend=!1}))}function allFalse(e){for(let a in e)if(e[a])return!1;return!0}function validateEmail(e){const a=e.value;""===a||null===a?(setErrorFor(e,"Email cannot be blank"),registrationErrors.email=!0,loginErrors.email=!0):a.length<=6?(setErrorFor(e,"Email too short"),registrationErrors.email=!0,loginErrors.email=!0):isEmail(a)?(setSuccessFor(e),registrationErrors.email=!1,loginErrors.email=!1):(setErrorFor(e,"Email is not valid"),registrationErrors.email=!0,loginErrors.email=!0)}function validatePassword(){passValue=regpassword.value,""===passValue||null===passValue?(setErrorFor(regpassword,"Password cannot be blank"),registrationErrors.password=!0):passValue.length<=6?(setErrorFor(regpassword,"Password must be 7+ characters"),registrationErrors.password=!0):(setSuccessFor(regpassword),registrationErrors.password=!1)}function validateCaptcha(){regemail.value;0!=registrationErrors.recaptcha?setErrorFor(regcaptcha,"Are you human? Please check captcha"):setSuccessFor(regcaptcha)}function recaptchaCheck(){registrationErrors.recaptcha=!1,setSuccessFor(regcaptcha)}function recaptchaCheckExp(){registrationErrors.recaptcha=!0,setErrorFor(regcaptcha,"Are you human?")}function calPasswordStrength(e){var a=0;if(!e)return a;for(var n=new Object,t=0;t<e.length;t++)n[e[t]]=(n[e[t]]||0)+1,a+=5/n[e[t]];var s={digits:/\d/.test(e),lower:/[a-z]/.test(e),upper:/[A-Z]/.test(e),nonWords:/\W/.test(e)};for(var r in variationCount=0,s)variationCount+=1==s[r]?1:0;return a+=10*(variationCount-1),parseInt(a)}regemail.addEventListener("focusin",(()=>{registrationErrors.emailbackend=!0})),document.querySelectorAll(".auth-form").forEach((e=>{const a=e.querySelector(".submit-loader"),n=e.querySelector(".auth-btn");e.addEventListener("submit",(t=>"reg-form"!==e.id||allFalse(registrationErrors)?"login-form"!==e.id||(validateEmail(loginemail),allFalse(loginErrors))?(n.disabled=!0,n.style.pointerEvents="none",n.style.opacity=.3,void(a.innerHTML='\n      <?xml version="1.0" encoding="utf-8"?>\n      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; background: none; display: block; shape-rendering: auto;" width="50px" height="50px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">\n      <path d="M10 50A40 40 0 0 0 90 50A40 43 0 0 1 10 50" fill="#ececec" stroke="none">\n        <animateTransform attributeName="transform" type="rotate" dur="1s" repeatCount="indefinite" keyTimes="0;1" values="0 50 51.5;360 50 51.5"></animateTransform>\n      </path>\n      \x3c!-- [ldio] generated by https://loading.io/ --\x3e</svg>\n    ')):(t.preventDefault(),console.log("login-form validation"),console.log(loginErrors),console.log(allFalse(loginErrors)),!1):(t.preventDefault(),validateEmail(regemail),validatePassword(),validateCaptcha(),checkEmail(),console.log("reg-form validation"),console.log(registrationErrors),console.log(allFalse(registrationErrors)),!1)))})),regemail.addEventListener("focusout",(()=>{checkEmail()})),regemail.addEventListener("keyup",(e=>{validateEmail(regemail)})),loginemail.addEventListener("focusout",(e=>{validateEmail(loginemail)})),regpassword.addEventListener("keyup",(e=>{validatePassword()})),console.log("connected 2.2_pwmeter.js"),document.querySelector("#reg-password").addEventListener("keyup",(function(){const e=document.getElementById("passwordmessage"),a=document.querySelectorAll(".pwmeter span");let n=calPasswordStrength(this.value);n<=40?(a[0].style.backgroundColor="red",a[0].className="meter-span-on",a[1].className="meter-span-off",a[2].className="meter-span-off",e.style.color="coral",e.innerHTML="Weak password"):n<=77?(a[1].style.backgroundColor="orange",a[1].className="meter-span-on",a[2].className="meter-span-off",e.style.color="orange",e.innerHTML="Password is average"):(a[2].style.backgroundColor="green",a[2].className="meter-span-on",e.style.color="green",e.innerHTML="Your password is strong"),""==this.value&&(a[0].className="meter-span-off",a[1].className="meter-span-off",a[2].className="meter-span-off",e.innerHTML="")})),console.log("connected 2.3_operations.js"),"true"===sessionStorage.getItem("regformErrors")&&document.addEventListener("DOMContentLoaded",(()=>{authModal.show(),registerTab.show()})),sessionStorage.setItem("regformErrors",!1),"true"===sessionStorage.getItem("loginErrors")&&document.addEventListener("DOMContentLoaded",(()=>{authModal.show(),loginTab.show()})),sessionStorage.setItem("loginErrors",!1),"/"!=location.pathname&&document.querySelector("#auth-modal").addEventListener("hide.bs.modal",(e=>{console.log("hida maida"),window.location.href="/"}));const showMegamenuMovie=e=>{const a=document.querySelector(".movie-column");if(a.innerHTML="",!e)return main.innerHTML='<div class="section-title">Movie info not available<span class="section-backlogo">Movie info not available</span></div>',!1;const{title:n,poster_path:t,vote_average:s,overview:r,release_date:o,genre_ids:i,id:l}=e,c=document.createElement("div");c.classList.add("movieCol"),c.innerHTML=`\n    \n      <div style="background-image: url('${img_path+t}'); background-size: cover; height: 250px; width: 100px"></div>\n        <div>\n          <h3>${n}</h3>\n            <span>${new Date(o).getFullYear()}</span> \n            <span class="pipe">|</span> \n            <span class="${getClassByRate(s).class}">\n              ${s} <i class="${getClassByRate(s).star}"></i></span>\n            <span class="pipe">|</span> \n            <span>${getGenres(i)}</span>\n        </div>\n        \n        <p>${r}</p>\n      </div>\n    </div>\n  `,a.appendChild(c),c.addEventListener("click",(function(){fetchMovie(l)}))};console.log("connected 3_genres.js");const data={genres:[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}]},genreCodes=[18,10749,14],getGenres=e=>{const a=data.genres;let n=[];return e.map((e=>{a.map((a=>{e==a.id&&n.push(a.name)}))})),n.join(", ")},movieData={genres:[{id:28,name:"Action"},{id:18,name:"Drama"},{id:53,name:"Thriller"}]},getMovieGenres=e=>{let a=[];return e.map((e=>{a.push(e.name)})),a.join(", ")};console.log("connected 4_body.js");const lang="ru-RU",url_params=new URLSearchParams({language:lang}),img_path="https://image.tmdb.org/t/p/w300",img_path_highres="https://image.tmdb.org/t/p/w1280",search_url="/api/movies/search?query=",url_theatersNow="/api/theaters/nowplaying?",url_theatersUpcoming="/api/theaters/upcoming?",url_moviesTrend="https://watch-movies-app.herokuapp.com/api/movies/trending?",url_moviesPopular="/api/movies/popular?",url_movieInfo="/api/movies/movieinfo/",marqueeReel=document.querySelector(".marquee-content"),gallery=document.querySelector(".carousel-inner"),galleryThumbnails=document.querySelector(".carousel-indicators"),main=document.querySelector("main"),section=document.querySelector("section"),header=document.querySelector("header");async function fetchData(e,a){const n=await fetch(e+url_params);a(await n.json())}async function fetchMovie(e){const a=await fetch(url_movieInfo+e+"?"+url_params);watchMovie(await a.json())}function toCarousel(e){gallery.innerHTML="",galleryThumbnails.innerHTML="",e.results.forEach(((e,a)=>{const{title:n,poster_path:t,vote_average:s,backdrop_path:r,overview:o,release_date:i,genre_ids:l,id:c}=e,d=document.createElement("div");d.classList.add("carousel-item"),0===a&&(d.className+=" active"),d.style.backgroundImage=`url("${img_path_highres+r}")`,d.innerHTML=`\n      <div class="fade-overlay"></div>\n      <div class="carousel-caption d-md-block">\n      \x3c!-- <div class="carousel-caption d-none d-md-block"> --\x3e\n        <h2 class="display-4">${n}</h2>\n          <p class="lead overview-header__stats">\n            <span class="carousel-caption-overview">${new Date(i).getFullYear()}</span> \n            <span class="pipe carousel-caption-overview">|</span> \n            <span class="carousel-caption-overview">\n              <i class="${0==s?"":getClassByRate(s).star}"></i> ${0==s?"":s} </span>\n            <span class="pipe carousel-caption-overview">|</span> \n            <span class="carousel-caption-overview">${getGenres(l)}</span>\n          </p>\n        <div class="film-details">\n          <a class="button-container-${a}" href="#"></a>\n          <p class="lead">${o.substring(0,200)}...</p>\n        </div>\n      </div>\n      `,gallery.appendChild(d);const m=document.createElement("button");m.classList.add("btn-custom"),m.className+=" mb-3",m.innerHTML='<i class="fas fa-play"></i> Play',m.addEventListener("click",(function(){fetchMovie(c)})),document.querySelector(".button-container-"+a).appendChild(m);const u=document.createElement("li");u.setAttribute("data-target","#carousel-main"),u.setAttribute("data-slide-to",""+a),u.innerHTML=`\n      <div class="card-dummy">\n        <img src="${img_path+t}">\n      </div>\n    `,marqueeReel.appendChild(u)})),infiniteMarquee()}function toMain(e){if(e.length<1)return main.innerHTML="",main.innerHTML='<div class="section-title">No Results Found<span class="section-backlogo">No Results Found</span></div>',!1;main.innerHTML="",main.innerHTML='<div class="section-title">POPULAR NOW<span class="section-backlogo">POPULAR</span></div>',e.results.forEach(((e,a)=>{const{title:n,poster_path:t,vote_average:s,backdrop_path:r,overview:o,release_date:i,genre_ids:l,id:c}=e,d=document.createElement("div");d.classList.add("movie"),d.innerHTML=`\n      <div id="burger" class="burger">\n        <div class="line1"></div>\n        <div class="line2"></div>\n        <div class="line3"></div>\n      </div>\n      \n      <div class="img-container">\n        <div class="img" style="background-image: url('${img_path+t}');"></div>\n        <div class="overlay"></div>\n      </div>\n      <div class="movie-info">\n        <div class="overview">\n          <div class="overview-header">\n            <h3>${n}</h3>\n            <div class="overview-header__stats">\n              <span>${new Date(i).getFullYear()}</span> \n              <span class="pipe">|</span> \n              <span class="${getClassByRate(s).class}">\n                ${s} <i class="${getClassByRate(s).star}"></i></span>\n              <span class="pipe">|</span> \n              <span>${getGenres(l)}</span>\n            </div>\n          </div>\n          \n          <div class="overview-body">\n            <p>${o}</p>\n          </div>\n          <div class="overview-footer">\n          </div>          \n        </div>\n      </div>\n    `,main.appendChild(d),d.addEventListener("click",(function(){fetchMovie(c)}))}))}function watchMovie(e){const{title:a,poster_path:n,vote_average:t,backdrop_path:s,overview:r,release_date:o,genres:i}=e;header.innerHTML="",main.innerHTML="",section.innerHTML=`\n    \x3c!-- <div class="section-title">Title<span class="section-backlogo">Title</span></div> --\x3e\n    \x3c!-- <h1>Title</h1> --\x3e\n\n    <section class="watch-movie">\n      <div class="watch-movie-bg-decor">${a}</div>\n      <div class="watch-movie-bg"></div>\n      <div class="container">\n        <div class="row">\n          <div class="col-lg-6 col-sm-12 padding-0">\n            <div class="movie-glance">\n              <div class="film-page_poster">\n                <img class="img-fluid" src="${img_path+n}" alt="${a}" title="${a}"> \n              </div>\n              <div class="movie-info-container">\n                <div class="">\n                  <div class="film-page_title">${a}</div>\n                  <div class="film-page_title-stats">\n                    <span>${new Date(o).getFullYear()}</span>\n                    <span>|</span>\n                    <span> R </span>\n                    <span>|</span>\n                    <span> 2hr 20min</span>\n                  </div>\n                </div>\n                <div class="film-page_rating">\n                  <span class="rating-star"><i class="${getClassByRate(t).star}"></i></span>\n                  <span class="rating-score ${getClassByRate(t).class}">${t}</span>\n                  <span class="reviews">87 875 <i class="fas fa-user-alt"></i></span>\n                </div>\n                <div class="film-page_genre">\n                  <span>${getMovieGenres(i)}</span>\n                </div>\n              </div>\n            </div>\n            <div class="movie-sources">\n              <ul class="play-button-group">\n                <li><a href="#" class="btn btn-sm btn-secondary wm-btn">4K <i class="fas fa-play"></i></a></li>\n                <li><a href="#" class="btn btn-sm btn-secondary wm-btn">HD <i class="fas fa-play"></i></a></li>\n                <li><a href="#" class="btn btn-sm btn-secondary wm-btn">SD <i class="fas fa-play"></i></a></li>\n                <li><a href="#" class="btn btn-sm btn-secondary wm-btn">IN THEATERS <i class="fas fa-film"></i></a></li>\n              </ul>\n            </div>\n          </div> \n          <div class="col-lg-6 col-sm-12">\n            <div class="movie-description">\n              <p>${r}</p>\n            </div>  \n          </div> \n        </div>\n        <div class="row">\n          <div class="iframe-container">\n            <iframe src="https://www.youtube.com/embed/ngWBddVNVZs?autoplay=1&start=13&mute=1" \n            allow="autoplay; picture-in-picture;" frameborder="0" allowfullscreen>\n            </iframe>\n          </div>\n        </div>\n      </div>\n    </section>\n\n    <section class="suggest-movie">\n      <div class="container">\n        <div class="title">\n          <h4>You Also May Like</h4>\n        </div>\n      </div>\n    </section>\n\n    <div class="container" style="padding-bottom: 10rem;">\n      <button data-tooltip=" Tooltip">Submit Form</button>\n    </div>\n  `}function getClassByRate(e){return 0==e?{class:"hide"}:e>=7?{class:"green",star:"fas fa-star"}:e>5?{class:"orange",star:"fas fa-star-half"}:{class:"red",star:"far fa-star"}}function infiniteMarquee(){const e=document.documentElement,a=getComputedStyle(e).getPropertyValue("--marquee-elements-displayed"),n=document.querySelector(".marquee-content");e.style.setProperty("--marquee-elements",n.children.length);for(let e=0;e<a;e++)n.appendChild(n.children[e].cloneNode(!0))}searchForm.addEventListener("submit",(e=>{const a=searchInput.value;e.preventDefault(),a&&(header.innerHTML="",main.innerHTML="",document.querySelector("header").innerHTML="",fetchData(search_url+a+"&",showMP),searchInput.value="")})),fetchData(url_moviesTrend,toCarousel),fetchData(url_moviesPopular,toMain),document.addEventListener("click",(function(e){e.target&&"burger"==e.target.id&&console.log("listener attached to document")})),console.log("connected 5_marquee.js"),console.log("connected 6_security.js");
//# sourceMappingURL=main.min.js.map
