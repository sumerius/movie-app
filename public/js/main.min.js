console.log("connected variables.js");const reglink=document.querySelector("#register-link"),loginlink=document.querySelector("#login-link"),triggerEl=document.querySelector('#myTab a[href="#register-tab-page"]'),triggerEl2=document.querySelector('#myTab a[href="#login-tab-page"]'),tabTrigger=new bootstrap.Tab(triggerEl),tabTrigger2=new bootstrap.Tab(triggerEl2),api_key="f23a624fd8704f7b8261ca835ef4e069",api_url=`https://api.themoviedb.org/3/discover/movie?api_key=${api_key}&include_adult=false&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page=1`,img_path="https://image.tmdb.org/t/p/w300",search_url=`https://api.themoviedb.org/3/search/movie?api_key=${api_key}&include_adult=false&language=en-US&query=`,trending_url="https://api.themoviedb.org/3/trending/movie/day?api_key="+api_key,img_path_hires="https://image.tmdb.org/t/p/w1280",movie_url="https://api.themoviedb.org/3/movie/",movie_url_options=`?api_key=${api_key}&language=en-US`,marqueeReel=document.querySelector(".marquee-content"),gallery=document.querySelector(".carousel-inner"),galleryThumbnails=document.querySelector(".carousel-indicators"),main=document.querySelector("main"),section=document.querySelector("section"),searchContainerMain=document.querySelector("#search-container-main"),searchForm=document.querySelector(".search-form"),searchInput=document.querySelector(".search-input"),header=document.querySelector("header"),regform=document.querySelector("#register-form"),regemail=document.querySelector("#reg-email"),regpassword=document.querySelector("#reg-password"),regbutton=document.querySelector("#btn-register"),emailerr=document.querySelector(".email-error"),emailsmall=document.querySelector(".email-small"),hideBtns=document.querySelectorAll(".toggle-hide");let registrationErrors={emailbackend:!0,email:!0,password:!0,recaptcha:!0};console.log("connected genres.js");const data={genres:[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}]},genreCodes=[18,10749,14],getGenres=e=>{const n=data.genres;let a=[];return e.map((e=>{n.map((n=>{e==n.id&&a.push(n.name)}))})),a.join(", ")},movieData={genres:[{id:28,name:"Action"},{id:18,name:"Drama"},{id:53,name:"Thriller"}]},getMovieGenres=e=>{let n=[];return e.map((e=>{n.push(e.name)})),n.join(", ")};function goBack(){window.history.back()}async function getTrending(e){const n=await fetch(e);showTrending((await n.json()).results)}async function getMovies(e){const n=await fetch(e);showMovies((await n.json()).results)}async function fetchMovie(e){const n=await fetch(movie_url+e+movie_url_options),a=await n.json();watchMovie(a),console.log(a)}function showTrending(e){gallery.innerHTML="",galleryThumbnails.innerHTML="",e.forEach(((e,n)=>{const{title:a,poster_path:s,vote_average:t,backdrop_path:r,overview:i,release_date:o,genre_ids:l,id:c}=e,d=document.createElement("div");d.classList.add("carousel-item"),0===n&&(d.className+=" active"),d.style.backgroundImage=`url("${img_path_hires+r}")`,d.innerHTML=`\n      <div class="fade-overlay"></div>\n      <div class="carousel-caption d-md-block">\n      \x3c!-- <div class="carousel-caption d-none d-md-block"> --\x3e\n        <h2 class="display-4">${a}</h2>\n          <p class="lead overview-header__stats">\n            <span class="carousel-caption-overview">${new Date(o).getFullYear()}</span> \n            <span class="pipe carousel-caption-overview">|</span> \n            <span class="carousel-caption-overview">\n              <i class="${0==t?"":getClassByRate(t).star}"></i> ${0==t?"":t} </span>\n            <span class="pipe carousel-caption-overview">|</span> \n            <span class="carousel-caption-overview">${getGenres(l)}</span>\n          </p>\n        <div class="film-details">\n          <a class="button-container-${n}" href="#"></a>\n          <p class="lead">${i.substring(0,200)}...</p>\n        </div>\n      </div>\n      `,gallery.appendChild(d);const m=document.createElement("button");m.classList.add("btn-custom"),m.className+=" mb-3",m.innerHTML='<i class="fas fa-play"></i> Play',m.addEventListener("click",(function(){fetchMovie(c)})),document.querySelector(".button-container-"+n).appendChild(m);const u=document.createElement("li");u.setAttribute("data-target","#carousel-main"),u.setAttribute("data-slide-to",""+n),u.innerHTML=`\n      <div class="card-dummy">\n        <img src="${img_path+s}">\n      </div>\n    `,marqueeReel.appendChild(u)})),infiniteMarquee()}function showMovies(e){main.innerHTML="",main.innerHTML='<div class="section-title">POPULAR NOW<span class="section-backlogo">POPULAR</span></div>',e.forEach(((e,n)=>{const{title:a,poster_path:s,vote_average:t,backdrop_path:r,overview:i,release_date:o,genre_ids:l,id:c}=e,d=document.createElement("div");d.classList.add("movie"),d.innerHTML=`\n      <div id="burger" class="burger">\n        <div class="line1"></div>\n        <div class="line2"></div>\n        <div class="line3"></div>\n      </div>\n      \n      <div class="img-container">\n        <div class="img" style="background-image: url('${img_path+s}');"></div>\n        <div class="overlay"></div>\n      </div>\n      <div class="movie-info">\n        <div class="overview">\n          <div class="overview-header">\n            <h3>${a}</h3>\n            <div class="overview-header__stats">\n              <span>${new Date(o).getFullYear()}</span> \n              <span class="pipe">|</span> \n              <span class="${getClassByRate(t).class}">\n                ${t} <i class="${getClassByRate(t).star}"></i></span>\n              <span class="pipe">|</span> \n              <span>${getGenres(l)}</span>\n            </div>\n          </div>\n          \n          <div class="overview-body">\n            <p>${i}</p>\n          </div>\n          <div class="overview-footer">\n          </div>          \n        </div>\n      </div>\n    `,main.appendChild(d),d.addEventListener("click",(function(){fetchMovie(c)}))}))}function watchMovie(e){const{title:n,poster_path:a,vote_average:s,backdrop_path:t,overview:r,release_date:i,genres:o}=e;header.innerHTML="",main.innerHTML="",section.innerHTML=`\n    \x3c!-- <div class="section-title">Title<span class="section-backlogo">Title</span></div> --\x3e\n    \x3c!-- <h1>Title</h1> --\x3e\n\n\n\n    <section class="watch-movie">\n      <div class="watch-movie-bg-decor">${n}</div>\n      <div class="watch-movie-bg"></div>\n      <div class="container">\n        <div class="row">\n          <div class="col-lg-6 col-sm-12 padding-0">\n            <div class="movie-glance">\n              <div class="film-page_poster">\n                <img class="img-fluid" src="${img_path+a}" alt="${n}" title="${n}"> \n              </div>\n              <div class="movie-info-container">\n                <div class="">\n                  <div class="film-page_title">${n}</div>\n                  <div class="film-page_title-stats">\n                    <span>${new Date(i).getFullYear()}</span>\n                    <span>|</span>\n                    <span> R </span>\n                    <span>|</span>\n                    <span> 2hr 20min</span>\n                  </div>\n                </div>\n                <div class="film-page_rating">\n                  <span class="rating-star"><i class="${getClassByRate(s).star}"></i></span>\n                  <span class="rating-score ${getClassByRate(s).class}">${s}</span>\n                  <span class="reviews">87 875 <i class="fas fa-user-alt"></i></span>\n                </div>\n                <div class="film-page_genre">\n                  <span>${getMovieGenres(o)}</span>\n                </div>\n              </div>\n            </div>\n            <div class="movie-sources">\n              <ul class="play-button-group">\n                <li><a href="#" class="btn btn-sm btn-secondary wm-btn">4K <i class="fas fa-play"></i></a></li>\n                <li><a href="#" class="btn btn-sm btn-secondary wm-btn">HD <i class="fas fa-play"></i></a></li>\n                <li><a href="#" class="btn btn-sm btn-secondary wm-btn">SD <i class="fas fa-play"></i></a></li>\n                <li><a href="#" class="btn btn-sm btn-secondary wm-btn">IN THEATERS <i class="fas fa-film"></i></a></li>\n              </ul>\n            </div>\n          </div> \n          <div class="col-lg-6 col-sm-12">\n            <div class="movie-description">\n              <p>${r}</p>\n            </div>  \n          </div> \n        </div>\n        <div class="row">\n          <div class="iframe-container">\n            <iframe src="https://www.youtube.com/embed/ngWBddVNVZs?autoplay=1&start=13&mute=1" \n            allow="autoplay; picture-in-picture;" frameborder="0" allowfullscreen>\n            </iframe>\n          </div>\n        </div>\n      </div>\n    </section>\n\n    <section class="suggest-movie">\n      <div class="container">\n        <div class="title">\n          <h4>You Also May Like</h4>\n        </div>\n      </div>\n    </section>\n\n\n    <div class="container" style="padding-bottom: 10rem;">\n      <button data-tooltip=" Tooltip">Submit Form</button>\n    </div>\n    \n    \n  `}function getClassByRate(e){return 0==e?{class:"hide"}:e>=7?{class:"green",star:"fas fa-star"}:e>5?{class:"orange",star:"fas fa-star-half"}:{class:"red",star:"far fa-star"}}function toggleShow(e){"password"===e.previousElementSibling.type?(e.previousElementSibling.type="text",e.className="toggle-hide toggle-hide-hide",e.innerText="HIDE"):(e.previousElementSibling.type="password",e.className="toggle-hide toggle-hide-show",e.innerText="SHOW")}function infiniteMarquee(){const e=document.documentElement,n=getComputedStyle(e).getPropertyValue("--marquee-elements-displayed"),a=document.querySelector(".marquee-content");e.style.setProperty("--marquee-elements",a.children.length);for(let e=0;e<n;e++)a.appendChild(a.children[e].cloneNode(!0))}function calPasswordStrength(e){var n=0;if(!e)return n;for(var a=new Object,s=0;s<e.length;s++)a[e[s]]=(a[e[s]]||0)+1,n+=5/a[e[s]];var t={digits:/\d/.test(e),lower:/[a-z]/.test(e),upper:/[A-Z]/.test(e),nonWords:/\W/.test(e)};for(var r in variationCount=0,t)variationCount+=1==t[r]?1:0;return n+=10*(variationCount-1),parseInt(n)}function allFalse(e){for(let n in e)if(e[n])return!1;return!0}function setErrorFor(e,n){const a=e.parentElement;a.querySelector(".small").innerText=n,a.className="form-group error"}function setSuccessFor(e){e.parentElement.className="form-group success"}function isEmail(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function checkEmail(){let e=document.querySelector("#reg-email").value.toLowerCase();fetch("/usercheck",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}).then((e=>e.json())).then((e=>{if(console.log(e),"success"!=e.message){emailsmall.innerHTML=""+e.message;emailsmall.parentElement.className="form-group error",registrationErrors.emailbackend=!0}else emailerr.innerHTML="",RegistrationErrors.emailbackend=!1}))}function recaptchaCheck(){registrationErrors.recaptcha=!1}function recaptchaCheckExp(){registrationErrors.recaptcha=!0}console.log("connected main.js"),getTrending(trending_url),getMovies(api_url),searchForm.addEventListener("submit",(e=>{const n=searchInput.value;e.preventDefault(),n&&(header.innerHTML="",main.innerHTML="",document.querySelector("header").innerHTML="",getMovies(search_url+n),searchInput.value="")})),document.addEventListener("click",(function(e){e.target&&"burger"==e.target.id&&console.log("listener attached to document")})),document.querySelector("main").addEventListener("click",(function(e){"burger"==e.target.id&&console.log("listener attached to <main>")})),reglink.addEventListener("click",(function(e){e.preventDefault(),tabTrigger.show()})),loginlink.addEventListener("click",(function(e){e.preventDefault(),tabTrigger2.show()})),hideBtns.forEach((e=>{e.addEventListener("click",(()=>{toggleShow(e)}))})),console.log("connected marquee.js"),console.log("connected pwmeter.js"),document.querySelector("#reg-password").addEventListener("keyup",(function(){const e=document.getElementById("passwordmessage"),n=document.querySelectorAll(".pwmeter span");let a=calPasswordStrength(this.value);a<=40?(n[0].style.backgroundColor="red",n[0].className="meter-span-on",n[1].className="meter-span-off",n[2].className="meter-span-off",e.style.color="red",e.innerHTML="Weak password"):a<=77?(n[1].style.backgroundColor="orange",n[1].className="meter-span-on",n[2].className="meter-span-off",e.style.color="orange",e.innerHTML="Password is average"):(n[2].style.backgroundColor="green",n[2].className="meter-span-on",e.style.color="green",e.innerHTML="Your password is strong"),""==this.value&&(n[0].className="meter-span-off",n[1].className="meter-span-off",n[2].className="meter-span-off",e.innerHTML="")})),console.log("connected security.js"),document.getElementById("register-form").addEventListener("submit",(e=>{e.preventDefault();const n=document.querySelector("#g-recaptcha-response").value,a=document.querySelector("#reg-username").value,s=document.querySelector("#reg-password").value;return fetch("/register",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({username:a,password:s,captcha:n})}).then((e=>e.json())).then((e=>{if(console.log(e),e.success)return console.log("successfully registered"),registrationErrors.recaptca=!1,window.location.href="/"}))})),console.log("connected regvalidate.js"),regform.addEventListener("submit",(e=>{allFalse(registrationErrors)||e.preventDefault()})),regbutton.addEventListener("click",(()=>{console.log(registrationErrors),console.log(allFalse(registrationErrors))})),regemail.addEventListener("focusout",(()=>{checkEmail()})),regemail.addEventListener("keyup",(e=>{const n=regemail.value;""===n||null===n?(setErrorFor(regemail,"Email cannot be blank"),registrationErrors.email=!0):n.length<=6?(setErrorFor(regemail,"Email too short"),registrationErrors.email=!0):isEmail(n)?(setSuccessFor(regemail),registrationErrors.email=!1):(setErrorFor(regemail,"Email is not valid"),registrationErrors.email=!0)})),regpassword.addEventListener("keyup",(e=>{passValue=regpassword.value,""===passValue||null===passValue?(setErrorFor(regpassword,"Password cannot be blank"),registrationErrors.password=!0):passValue.length<=6?(setErrorFor(regpassword,"Password must be longer than 6 characters"),registrationErrors.password=!0):(setSuccessFor(regpassword),registrationErrors.password=!1)}));
//# sourceMappingURL=main.min.js.map
